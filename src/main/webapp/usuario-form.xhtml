<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:composition template="layout.xhtml">
        <ui:define name="content">
            <h:form id="productForm">
                <p:panel header="Administración de los usuarios">
                    <p:growl id="messages" showDetail="true"/>

                    <p:toolbar>
                        <p:toolbarGroup>
                            <p:commandButton value="Nuevo Usuario" icon="pi pi-plus" actionListener="#{usuariosControlador.nuevoUsuario}"  
                                             update=":formdialogcrud:dialogoid" oncomplete="PF('manageDialogCrud').show()"
                                             styleClass="ui-button-success" style="margin-right: .5rem">
                                <p:resetInput target=":formdialogcrud:dialogoid"/>
                            </p:commandButton>
                        </p:toolbarGroup>
                    </p:toolbar>
                    <p:dataTable id="dt-usuarios" widgetVar="dtProducts" var="usuario" value="#{usuariosControlador.usuarios}"
                                 reflow="true" styleClass="products-table"
                                 rowKey="#{usuario.idxxxxxx}" paginator="true"
                                 rows="10" rowSelectMode="add" paginatorPosition="bottom">
                        <p:column headerText="Id" sortBy="#{usuario.idxxxxxx}" filterBy="#{usuario.idxxxxxx}">
                            <h:outputText value="#{usuario.idxxxxxx}"/>
                        </p:column>
                        <p:column headerText="Primer Apellido" sortBy="#{usuario.seguapel}" filterBy="#{usuario.seguapel}">
                            <h:outputText value="#{usuario.seguapel}"/>
                        </p:column>
                        <p:column headerText="Segundo Apellido" sortBy="#{usuario.primapel}" filterBy="#{usuario.primapel}">
                            <h:outputText value="#{usuario.primapel}"/>
                        </p:column>
                        <p:column headerText="Primer Nombre" sortBy="#{usuario.primnomb}" filterBy="#{usuario.primnomb}">
                            <h:outputText value="#{usuario.primnomb}"/>
                        </p:column>
                        <p:column headerText="Segundo Nombre" sortBy="#{usuario.segunomb}" filterBy="#{usuario.segunomb}">
                            <h:outputText value="#{usuario.segunomb}"/>
                        </p:column>
                        <p:column headerText="Otro Nombre" sortBy="#{usuario.otronomb}" filterBy="#{usuario.otronomb}">
                            <h:outputText value="#{usuario.otronomb}"/>
                        </p:column>
                        <p:column headerText="Cédula" sortBy="#{usuario.cedulaxx}" filterBy="#{usuario.cedulaxx}">
                            <h:outputText value="#{usuario.cedulaxx}"/>
                        </p:column>
                        <p:column headerText="Email" sortBy="#{usuario.emailxxx}" filterBy="#{usuario.emailxxx}">
                            <h:outputText value="#{usuario.emailxxx}"/>
                        </p:column>
                        <p:column headerText="Email" sortBy="#{usuario.emailxxx}" filterBy="#{usuario.emailxxx}">
                            <h:outputText value="#{usuario.emailxxx}"/>
                        </p:column>
                        <p:column >
                            <p:commandButton icon="pi pi-pencil" update=":formdialogcrud:dialogoid"
                                             oncomplete="PF('manageDialogCrud').show()"
                                             styleClass="edit-button rounded-button ui-button-success" process="@this"
                                             actionListener="#{usuariosControlador.leerUsuario(usuario)}">
                                <p:resetInput target=":formdialogcrud:dialogoid"/>
                            </p:commandButton>
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
            <h:form id="formdialogcrud">
                <p:dialog id="dialogoid" header="Gestionar Usuario" modal="true" width="60%" height="350"  showEffect="fade" hideEffect="fade" resizable="false"
                          widgetVar="manageDialogCrud" responsive="true">
                    <p:outputPanel id="manage-dialogcrud-content" class="ui-fluid">
                        <div class="ui-g">
                            <div class="ui-g-6">                                
                                <label for="fechregi">Fecha de registro</label>

                                <p:datePicker id="fechingr" value="#{usuariosControlador.usuariox.fechingr}" showTime="false" required="true"
                                              validatorMessage="Seleccione la fecha de ingreso" requiredMessage="Seleccione la fecha de ingreso"
                                              mindate="#{usuariosControlador.minDateTime}" maxdate="#{usuariosControlador.maxDateTime}"/>
                                <h:message for="fechingr" style="color:red" />
                            </div>
                            <div class="ui-g-6">                                
                                <label for="primapel">Primer Apellido</label>
                                <p:inputText id="primapel" type="text" label="El Primer Apellido" value="#{usuariosControlador.usuariox.primapel}">
                                    <f:validator validatorId="CampoRequeridoValidator"/>
                                </p:inputText>
                                <h:message for="primapel" style="color:red" />
                            </div>
                            <div class="ui-g-6">
                                <label for="seguapel">Segundo Apellido</label>
                                <p:inputText id="seguapel" type="text" label="El Segundo Apellido" value="#{usuariosControlador.usuariox.seguapel}" >
                                    <f:validator validatorId="CampoRequeridoValidator"/>
                                </p:inputText>
                                <h:message for="seguapel" style="color:red" />
                            </div>
                            <div class="ui-g-6">
                                <label for="primnomb">Primer Nombre</label>
                                <p:inputText id="primnomb" type="text" label="El Primer Nombre" value="#{usuariosControlador.usuariox.primnomb}"   >
                                    <f:validator validatorId="CampoRequeridoValidator"/>
                                </p:inputText>
                                <h:message for="primnomb" style="color:red" />
                            </div>
                            <div class="ui-g-6">
                                <label for="segunomb">Segundo Nombre</label>
                                <p:inputText id="segunomb" type="text" label="El Segundo Nombre" value="#{usuariosControlador.usuariox.segunomb}"  >
                                    <f:validator validatorId="CampoRequeridoValidator"/>
                                </p:inputText>
                                <h:message for="segunomb" style="color:red" />
                            </div>
                            <div class="ui-g-6">
                                <label for="otronomb">Otro Nombre</label>
                                <p:inputText id="otronomb" type="text" label="El Otro Nombre" value="#{usuariosControlador.usuariox.otronomb}" >
                                    <f:validator validatorId="CampoRequeridoValidator"/>
                                </p:inputText>
                                <h:message for="otronomb" style="color:red" />
                            </div>

                            <div class="ui-g-6">
                                <label for="cedulax">Cédula</label>
                                <p:inputText id="cedulaxx" type="text" label="El número de Cédula" value="#{usuariosControlador.usuariox.cedulaxx}">
                                    <f:validator validatorId="CampoRequeridoValidator"/>
                                </p:inputText>
                                <h:message for="cedulaxx" style="color:red" />
                            </div>

                            <div class="ui-g-6">
                                <label for="doctipoid">Tipo de Documento</label>                           
                                <p:selectOneMenu id="doctipoid"   value="#{usuariosControlador.usuariox.doctipoid}" filter="true"
                                                 required="true"  validatorMessage="Seleccione el tipo de documento" requiredMessage="Seleccione el tipo de documento"
                                                 panelStyle="width:180px">
                                    <f:selectItem itemLabel=".:SELECCIONE:." itemValue="" />
                                    <f:selectItems value="#{doctiposControlador.doctipos}" />
                                </p:selectOneMenu>
                                <h:message for="doctipoid" style="color:red" />
                            </div>
                            <div class="ui-g-6">
                                <label for="areaid">Área Administrativa</label>
                                <p:selectOneMenu id="areaid"   value="#{usuariosControlador.usuariox.areaid}" filter="true"
                                                 required="true"  validatorMessage="Seleccione el área administrativa" requiredMessage="Seleccione el área administrativa"
                                                 panelStyle="width:180px">
                                    <f:selectItem itemLabel=".:SELECCIONE:." itemValue="" />
                                    <f:selectItems value="#{areasControlador.areaxxxx}" />
                                </p:selectOneMenu>
                                <h:message for="areaid" style="color:red" />
                            </div>
                            <div class="ui-g-6">
                                <label for="paiseid">País donde labora</label>
                                <p:selectOneMenu id="paiseid"   value="#{usuariosControlador.usuariox.paiseid}" filter="true"
                                                 required="true"  validatorMessage="Seleccione el país" requiredMessage="Seleccione el país"
                                                 panelStyle="width:180px">
                                    <f:selectItem itemLabel=".:SELECCIONE:." itemValue="" />
                                    <f:selectItems value="#{paisesControlador.paisesxx}" />
                                </p:selectOneMenu>
                                <h:message for="paiseid" style="color:red" />
                            </div>
                        </div>

                    </p:outputPanel>
                    <f:facet name="footer">
                        <p:commandButton value="Guardar/Editar" icon="pi pi-check" actionListener="#{usuariosControlador.registrar}"
                                         update="manage-dialogcrud-content, :productForm:dt-usuarios" process="manage-dialogcrud-content @this"/>
                        <p:commandButton value="Cancelar" icon="pi pi-times" onclick="PF('manageDialogCrud').hide()"
                                         class="ui-button-secondary"/>
                    </f:facet>
                </p:dialog>
            </h:form>
        </ui:define>
    </ui:composition>
</html>
